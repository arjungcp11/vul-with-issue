package com.example.rcp.views;

import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.layout.*;
import org.eclipse.swt.widgets.*;
import org.eclipse.ui.part.ViewPart;

public class ExampleWizardView extends ViewPart {

    public static final String ID = "com.example.rcp.views.exampleWizardView";

    @Override
    public void createPartControl(Composite parent) {

        parent.setLayout(new GridLayout(2, false));

        // ===== Header =====
        Label title = new Label(parent, SWT.NONE);
        title.setText("Example: Wizard");
        title.setFont(new Font(parent.getDisplay(), "Segoe UI", 14, SWT.BOLD));
        title.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, false, 2, 1));

        // ===== Info Message =====
        Label info = new Label(parent, SWT.BORDER);
        info.setText("You have already submitted this webform. View your previous submission.");
        info.setBackground(new Color(parent.getDisplay(), 223, 240, 216));
        info.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 2, 1));

        // ===== Main Content =====
        Composite left = new Composite(parent, SWT.NONE);
        left.setLayout(new GridLayout(1, false));
        left.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        Composite right = new Composite(parent, SWT.NONE);
        right.setLayout(new GridLayout(1, false));
        right.setLayoutData(new GridData(250, SWT.DEFAULT));

        // ===== Wizard Steps =====
        createSteps(left);

        // ===== Form =====
        createForm(left);

        // ===== Tools Panel =====
        createTools(right);

        // ===== Footer =====
        Label footer = new Label(parent, SWT.NONE);
        footer.setText("Powered by Drupal");
        footer.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, false, 2, 1));
    }

    private void createSteps(Composite parent) {
        Composite steps = new Composite(parent, SWT.NONE);
        steps.setLayout(new GridLayout(5, true));
        steps.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false));

        step(steps, "1", "Your Information", true);
        step(steps, "2", "Contact Information", false);
        step(steps, "3", "Your Feedback", false);
        step(steps, "4", "Preview", false);
        step(steps, "5", "Complete", false);
    }

    private void step(Composite parent, String num, String text, boolean active) {
        Composite c = new Composite(parent, SWT.NONE);
        c.setLayout(new GridLayout(1, false));

        Label circle = new Label(c, SWT.CENTER | SWT.BORDER);
        circle.setText(num);
        circle.setLayoutData(new GridData(30, 30));

        if (active) {
            circle.setBackground(parent.getDisplay()
                    .getSystemColor(SWT.COLOR_TITLE_BACKGROUND_GRADIENT));
            circle.setForeground(parent.getDisplay().getSystemColor(SWT.COLOR_WHITE));
        }

        Label label = new Label(c, SWT.CENTER);
        label.setText(text);
    }

    private void createForm(Composite parent) {
        Composite form = new Composite(parent, SWT.NONE);
        form.setLayout(new GridLayout(2, false));
        form.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        // First Name
        new Label(form, SWT.NONE).setText("First Name");
        Text firstName = new Text(form, SWT.BORDER);
        firstName.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false));

        // Last Name
        new Label(form, SWT.NONE).setText("Last Name");
        Text lastName = new Text(form, SWT.BORDER);
        lastName.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false));

        // Gender
        new Label(form, SWT.NONE).setText("Gender");
        Composite gender = new Composite(form, SWT.NONE);
        gender.setLayout(new GridLayout(1, false));

        new Button(gender, SWT.RADIO).setText("Male");
        new Button(gender, SWT.RADIO).setText("Female");
        new Button(gender, SWT.RADIO).setText("Transgender");

        // Next Button
        new Label(form, SWT.NONE);
        Button next = new Button(form, SWT.PUSH);
        next.setText("Next Page >");
        next.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, false, false));
    }

    private void createTools(Composite parent) {
        Group tools = new Group(parent, SWT.NONE);
        tools.setText("Tools");
        tools.setLayout(new GridLayout());
        tools.setLayoutData(new GridData(SWT.FILL, SWT.TOP, true, false));

        Button add = new Button(tools, SWT.PUSH);
        add.setText("Add content");
        add.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false));
    }

    @Override
    public void setFocus() {
    }
}
